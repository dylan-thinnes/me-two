window.addEventListener("load",function(){mockNode(document)}),mockNode=function(e){links=e.getElementsByTagName("a"),mockCollection(links)},mockCollection=function(e){links=[];for(var t=0;t<e.length;t++)links[t]=e[t];links.filter(referencesLocal).map(mockLink)},mockLink=function(e){e.addEventListener("click",prevDefaultCallback),e.addEventListener("click",navigateTo.bind(window,e.href)),e.setAttribute("data-mocked","true")},prevDefaultCallback=function(e){e.preventDefault()},referencesLocal=function(e){return url=e.getAttribute("href"),url!=undefined&&("true"!=e.getAttribute("data-mocked")&&(hasScheme=/^\w+:\/\//.test(url),!hasScheme))},navigateTo=function(e){history.pushState({},"",e),onNavigate()},onNavigate=function(){showCurrentPage()},window.onpopstate=onNavigate,showCurrentPage=function(){var n=window.location.pathname;if("/"!==n)if((e=findSection(n))==undefined)console.log("section does not exist",n),getContent(n,function(e){var t=createSection(n,e);setTitleFromSection(t),document.body.classList.add("open"),setTimeout(selectSection.bind(window,n),100)});else{var e=selectSection(n);setTitleFromSection(e),document.body.classList.add("open")}else document.body.classList.remove("open")},setTitleFromSection=function(e){var t=e.getElementsByTagName("title")[0];return console.log("setting title from section",e,t),t==undefined?window.title="Dylan Thinnes":document.title=t.innerHTML},getContent=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&t(n.response)},n.open("GET",e+"?nolayout=true"),n.send()},findSection=function(e){for(var t=document.getElementsByClassName("section"),n=0;n<t.length;n++){var o=t[n];if(o.getAttribute("data-url")==e)return o}},createSection=function(e,t){var n=document.createElement("div");return n.classList.add("section"),n.innerHTML=t,n.setAttribute("data-url",e),document.getElementById("content").appendChild(n),mockNode(n),n},selectSection=function(e){for(var t=document.getElementsByClassName("section"),n=0;n<t.length;n++)t[n].classList.remove("selected");return section=findSection(e),section.classList.add("selected"),section};